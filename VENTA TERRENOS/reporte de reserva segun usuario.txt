-- REPORTE DE TODOS LOS USUARIO DE LAS CANTIDADES DE TERRENOS RESERVADOS DE HOY
SELECT  U.NOMBRES, U.APELLIDOS,U.USUARIO,COUNT(U.USUARIO) AS CANTIDAD, SUM(R.PRECIO) AS SUMA_TOTAL, R.FECHARES
FROM dbo.USUARIO AS U INNER JOIN dbo.RESERVADETALLE AS R ON U.IDUSUARIO = R.IDUSUARIO
WHERE cast(R.FECHARES as date) = cast(getdate() as date)
GROUP BY  U.USUARIO,U.NOMBRES, U.APELLIDOS, R.FECHARES

-- REPORTE DE RESERVAS VIGENTES DE TODOS LOS USUARIO DE HOY
SELECT  U.NOMBRES, U.APELLIDOS,U.USUARIO,COUNT(U.USUARIO) AS CANTIDAD, SUM(R.PRECIO) AS SUMA_TOTAL, R.FECHARES
FROM dbo.USUARIO AS U INNER JOIN dbo.RESERVADETALLE AS R ON U.IDUSUARIO = R.IDUSUARIO
WHERE cast(R.FECHARES as date) = cast(getdate() as date) AND R.ESTADORESERVA='VIGENTE'
GROUP BY  U.USUARIO,U.NOMBRES, U.APELLIDOS, R.FECHARES

SELECT * FROM RESERVADETALLE



REVISAR
select YEAR(FechaAlbaran) as yyyy, MONTH(FechaAlbaran) as mm, SUM(CantidadVendida) as TotalVendido
from T
where cast(FechaAlbaran as date) between cast(fechadesde as date) and cast(fechahasta as date)
group by YEAR(FechaAlbaran), MONTH(FechaAlbaran)
order by yyyy, mm;



delete from reserva
delete from reservadetalle
delete from reserva

update terreno set estadoreserva='LIBRE'

--INSERTAR REGISTROS DE CLIENTE
INSERT INTO CLIENTE VALUES('111', '0', 'JOSE', 'QUIROGA', '765465', 'HOMBRE', '19/05/2010', 'JOSE@GMAIL.COM', '9', 'HABILITADO')
INSERT INTO CLIENTE VALUES('222', '1', 'ANA', 'FLORES','3356545','MUJER','20/05/2011','ANAFLORES@HOTMAIL.COM','8','HABILITADO')
INSERT INTO CLIENTE VALUES('333', '2', 'MARIA','ESTEVEZ','7654654','MUJER','21/05/1980','MARIAESTEVEEZ@HOTMAIL.COM','39','HABILITADO')
INSERT INTO CLIENTE VALUES('444', '3', 'FELIX ALFREDO', 'QUISPE QUISPE', '703700445', 'HOMBRE', '22/05/2013', 'FAQUISPE.ES@GMAIL.COM', '-1', 'DESHABILITADO')
INSERT INTO CLIENTE VALUES('555', '4', 'ALBERTO', 'RODRIGUEZ', '703700445', 'HOMBRE', '20/05/1990', 'FAQUISPE.ES@GMAIL.COM', '29', 'DESHABILITADO')

--INSERTAR REGISTROS DE TERRENO TIPO
INSERT INTO TERRENOTIPO VALUES('LOTE', 'ActiveCaption', 'DESHABILITADO')
INSERT INTO TERRENOTIPO VALUES('CANCHAS', 'LimeGreen', 'HABILITADO')
INSERT INTO TERRENOTIPO VALUES('LOTE', 'Control', 'HABILITADO')
INSERT INTO TERRENOTIPO VALUES('CANCHAS1', 'Maroon', 'HABILITADO')

--INSERTAR REGISTROS DE URBANIZACION
INSERT INTO URBANIZACION VALUES('PAITITI SUR', '300 HECT', 'AL LADO DEL VIRU VIRU', 1200, 'HABILITADO')
INSERT INTO URBANIZACION VALUES('TECHO', '300 HECT', 'TROMPILLO', 1200, 'HABILITADO')

--INSERTAR USUARIO
INSERT INTO USUARIO VALUES('USUARIO 1', 'quiroga', 'USUARIO1', '123', 'HABILITADO', '21/05/2019')
INSERT INTO USUARIO VALUES('USUARIO 2', 'quiroga', 'USUARIO2', '123', 'HABILITADO', '21/05/2019')
INSERT INTO USUARIO VALUES('USUARIO 3', 'quiroga', 'USUARIO3', '123', 'HABILITADO', '21/05/2019')











